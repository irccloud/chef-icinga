# Generated by Chef

<VirtualHost *:<%= node['icinga']['apache_port']%>>
        ServerName <%= node['icinga']['url'] %>
        <% unless node['icinga']['url_aliases'].empty? %>
        ServerAlias <%= [node['icinga']['url_aliases']].flatten.compact.join(" ") %>
        <% end %>

        <% if node['icinga']['ssl'] == true %>
          SSLEngine On
        <% end %>

        ScriptAlias /cgi-bin/icinga /usr/lib/cgi-bin/icinga
        ScriptAlias /icinga/cgi-bin /usr/lib/cgi-bin/icinga

        Alias /icinga/stylesheets /etc/icinga/stylesheets
        Alias /icinga /usr/share/icinga/htdocs

        RewriteEngine On
        RewriteRule ^/$ /icinga [R]
        <DirectoryMatch (/usr/share/icinga/htdocs|/usr/lib/cgi-bin/icinga|/etc/icinga/stylesheets)>
              Options FollowSymLinks

              DirectoryIndex index.html

              Order Allow,Deny
              Allow From All
        </DirectoryMatch>
</VirtualHost>
